machine:
  node:
    version: 4.4.4

general:
  branches:
    ignore:
      - gh-pages

test:
  override:
    - npm run compile

deployment:
  publish:
    branch: master
    commands:
      - git config --global user.name "CircleCI Deployment"
      - git config --global user.email "doreen.hakimi@gmail.com"
      - cp -f README.md src/index.md
      - cp -Rf content/* src/content/
      - grep -rl '.md' src | xargs sed -i '' -e 's/.md//g'
      - npm run publish
